<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ resume.full_name|upper }} - Resume</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>{{ resume.full_name|upper }}</h1>
                {% if resume.roll_number %}<p>{{ resume.roll_number }}</p>{% endif %}
            </div>
            <div class="contact-info">
                {% if resume.email %}<p><strong>Email:</strong> {{ resume.email }}</p>{% endif %}
                {% if resume.mobile_number %}<p><strong>Mobile:</strong> {{ resume.mobile_number }}</p>{% endif %}
                {% if resume.profile_photo %}
                <img src="{{ resume.profile_photo.url }}" alt="Profile Picture" class="profile-pic">
                {% else %}
                <img src="https://via.placeholder.com/400" alt="Profile Picture" class="profile-pic">
                {% endif %}
            </div>
        </div>

        <div class="section">
            {% if resume.gender %}<p><strong>Gender:</strong> {{ resume.gender }}</p>{% endif %}
            {% if resume.date_of_birth %}<p><strong>Date of Birth:</strong> {{ resume.date_of_birth|date:"jS F Y" }}</p>{% endif %}
            {% if resume.languages_known %}<p><strong>Languages known:</strong> {{ resume.languages_known }}</p>{% endif %}
            {% if resume.github_url %}<p><strong>GitHub:</strong> <a href="{{ resume.github_url }}">{{ resume.github_url }}</a></p>{% endif %}
            {% if resume.linkedin_url %}<p><strong>LinkedIn:</strong> <a href="{{ resume.linkedin_url }}">{{ resume.linkedin_url }}</a></p>{% endif %}
            {% if resume.address %}<p><strong>Address:</strong> {{ resume.address }}</p>{% endif %}
        </div>

        {% if resume.objective %}
        <div class="section">
            <h2>OBJECTIVE</h2>
            <p>{{ resume.objective }}</p>
        </div>
        {% endif %}

        {% if resume.academic_qualification %}
        <div class="section">
            <h2>ACADEMIC QUALIFICATION</h2>
            <p>{{ resume.academic_qualification }}</p>
        </div>
        {% endif %}

        {% if resume.skills.all %}
        <div class="section">
            <h2>SKILL SET</h2>
            <div class="skills-category">
                <h4>Languages</h4>
                <ul>
                    {% for skill in resume.skills.all %}
                        {% if skill.category == 'languages' %}
                        <li>{{ skill.name }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            <div class="skills-category">
                <h4>Platform</h4>
                <ul>
                    {% for skill in resume.skills.all %}
                        {% if skill.category == 'platform' %}
                        <li>{{ skill.name }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            <div class="skills-category">
                <h4>Tools & Frameworks</h4>
                <ul>
                    {% for skill in resume.skills.all %}
                        {% if skill.category == 'tools & frameworks' %}
                        <li>{{ skill.name }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            <div class="skills-category">
                <h4>Databases</h4>
                <ul>
                    {% for skill in resume.skills.all %}
                        {% if skill.category == 'databases' %}
                        <li>{{ skill.name }}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}

        {% if resume.areas_of_interest %}
        <div class="section">
            <h2>AREAS OF INTEREST</h2>
            <ul>
                {% for interest in resume.areas_of_interest.split(',') %}
                <li>{{ interest.strip }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        {% if resume.selected_education.all %}
        <div class="section">
            <h2>ACADEMIC RECORD</h2>
            <ul>
                {% for edu in resume.selected_education.all|dictsortreversed:"start_year" %}
                <li><strong>{{ edu.title }}</strong><br>
                    {{ edu.institution }}<br>
                    {{ edu.start_year }}{% if edu.end_year %} - {{ edu.end_year }}{% endif %}<br>
                    {% if edu.score %}{{ edu.score }}{% if edu.score|floatformat:"0" == edu.score|stringformat:"s" %}%{% endif %}{% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        {% if resume.selected_projects.all %}
        <div class="section">
            <h2>ACADEMIC PROJECTS</h2>
            {% for project in resume.selected_projects.all|dictsortreversed:"created_at" %}
            <div class="project">
                <div class="project-title">{{ project.title }}</div>
                <p>{{ project.description }}</p>
                {% if project.skills.all %}
                <p><strong>Technologies:</strong> 
                    {{ project.skills.all|join:", " }}
                </p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if resume.selected_experience.all %}
        <div class="section">
            <h2>EXPERIENCE</h2>
            {% for exp in resume.selected_experience.all|dictsortreversed:"start_date" %}
            <div class="project">
                <div class="project-title">{{ exp.job_title }} at {{ exp.company_name }}</div>
                <p>{{ exp.start_date|date:"F Y" }} - {% if exp.end_date %}{{ exp.end_date|date:"F Y" }}{% else %}Present{% endif %}</p>
                <p>{{ exp.description }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if resume.achievements %}
        <div class="section">
            <h2>EXTRA-CURRICULAR ACTIVITIES AND ACHIEVEMENTS</h2>
            <ul>
                {% for achievement in resume.achievements.splitlines %}
                {% if achievement.strip %}
                <li>{{ achievement }}</li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <div class="declaration">
            <h2>DECLARATION</h2>
            <p>I, {{ resume.full_name }}, do hereby declare that the information given above is true to the best of my knowledge.</p>
            <p>Place: {% if resume.location %}{{ resume.location }}{% else %}Coimbatore{% endif %}<br>
            Date : {% now "jS F Y" %}<br>
            ({{ resume.full_name }})</p>
        </div>
    </div>
</body>
</html>